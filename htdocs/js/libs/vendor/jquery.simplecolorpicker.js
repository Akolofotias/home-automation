(function(e){"use strict";var t=function(e,t){this.init("simplecolorpicker",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i=this;i.type=t;i.$select=e(n);i.$select.hide();i.options=e.extend({},e.fn.simplecolorpicker.defaults,r);i.$colorList=null;if(i.options.picker===true){var s=i.$select.find("> option:selected").text();i.$icon=e('<span class="simplecolorpicker icon"'+' title="'+s+'"'+' style="background-color: '+i.$select.val()+';"'+' role="button" tabindex="0">'+"</span>").insertAfter(i.$select);i.$icon.on("click."+i.type,e.proxy(i.showPicker,i));i.$picker=e('<span class="simplecolorpicker picker '+i.options.theme+'"></span>').appendTo(document.body);i.$colorList=i.$picker;e(document).on("mousedown."+i.type,e.proxy(i.hidePicker,i));i.$picker.on("mousedown."+i.type,e.proxy(i.mousedown,i))}else{i.$inline=e('<span class="simplecolorpicker inline '+i.options.theme+'"></span>').insertAfter(i.$select);i.$colorList=i.$inline}i.$select.find("> option").each(function(){var t=e(this);var n=t.val();var r=t.is(":selected");var s=t.is(":disabled");var o="";if(r===true){o=" data-selected"}var u="";if(s===true){u=" data-disabled"}var a="";if(s===false){a=' title="'+t.text()+'"'}var f="";if(s===false){f=' role="button" tabindex="0"'}var l=e('<span class="color"'+a+' style="background-color: '+n+';"'+' data-color="'+n+'"'+o+u+f+">"+"</span>");i.$colorList.append(l);l.on("click."+i.type,e.proxy(i.colorSpanClicked,i));var c=t.next();if(c.is("optgroup")===true){i.$colorList.append('<span class="vr"></span>')}})},selectColor:function(t){var n=this;var r=n.$colorList.find("> span.color").filter(function(){return e(this).data("color").toLowerCase()===t.toLowerCase()});if(r.length>0){n.selectColorSpan(r)}else{console.error("The given color '"+t+"' could not be found")}},showPicker:function(){var e=this.$icon.offset();this.$picker.css({left:e.left-6,top:e.top+this.$icon.outerHeight()});this.$picker.show(this.options.pickerDelay)},hidePicker:function(){this.$picker.hide(this.options.pickerDelay)},selectColorSpan:function(e){var t=e.data("color");var n=e.prop("title");e.siblings().removeAttr("data-selected");e.attr("data-selected","");if(this.options.picker===true){this.$icon.css("background-color",t);this.$icon.prop("title",n);this.hidePicker()}this.$select.val(t)},colorSpanClicked:function(t){if(e(t.target).is("[data-disabled]")===false){this.selectColorSpan(e(t.target));this.$select.trigger("change")}},mousedown:function(e){e.stopPropagation();e.preventDefault()},destroy:function(){if(this.options.picker===true){this.$icon.off("."+this.type);this.$icon.remove();e(document).off("."+this.type)}this.$colorList.off("."+this.type);this.$colorList.remove();this.$select.removeData(this.type);this.$select.show()}};e.fn.simplecolorpicker=function(n){var r=e.makeArray(arguments);r.shift();return this.each(function(){var i=e(this),s=i.data("simplecolorpicker"),o=typeof n==="object"&&n;if(s===undefined){i.data("simplecolorpicker",s=new t(this,o))}if(typeof n==="string"){s[n].apply(s,r)}})};e.fn.simplecolorpicker.defaults={theme:"",picker:false,pickerDelay:0}})(jQuery)